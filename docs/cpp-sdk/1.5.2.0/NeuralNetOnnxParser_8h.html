<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- For Mobile Devices -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
    <meta name="generator" content="Doxygen 1.8.17" />
    <title>HElayers SDK: src/helayers/ai/nn/NeuralNetOnnxParser.h File Reference</title>
    <!--<link href="tabs.css" rel="stylesheet" type="text/css"/>-->
    <link href="doxygen.css" rel="stylesheet" type="text/css" />
    <link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
    <link href='https://fonts.googleapis.com/css?family=Roboto+Slab' rel='stylesheet' type='text/css'>
    <link
        href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wght@0,100;1,700&family=Merriweather&family=Merriweather+Sans&family=Open+Sans&family=Poppins:ital@1&family=Roboto:ital,wght@0,400;1,300;1,900&display=swap"
        rel="stylesheet">
    <script type="module" src="https://1.www.s81c.com/common/carbon/web-components/tag/latest/ui-shell.min.js"></script>
</head>
<body style="font-family: 'Merriweather', serif;">
    <nav class="navbar navbar-default" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <a class="navbar-brand">HElayers SDK 1.5.2.0</a>
            </div>
        </div>
    </nav>
    <div id="top">
        <bx-header aria-label="IBM Platform Name">
            <bx-header-menu-button button-label-active="Close menu" button-label-inactive="Open menu">
            </bx-header-menu-button>
            <bx-header-name href="index.html" prefix="IBM">HElayers</bx-header-name>
            <bx-header-nav menu-bar-label="IBM HElayers">
                <bx-header-nav-item href="index.html">Overview
                </bx-header-nav-item>
                <bx-header-menu menu-label="Namespaces" trigger-content="Namespaces">
                    <bx-header-menu-item href="namespaces.html">Namespace List
                    </bx-header-menu-item>
                    <bx-header-menu menu-label="Namespace Members" trigger-content="Namespace  Members">
                        <bx-header-menu-item href="namespacemembers.html">All
                        </bx-header-menu-item>
                        <bx-header-menu-item href="namespacemembers_func.html">Functions
                        </bx-header-menu-item>
                        <bx-header-menu-item href="namespacemembers_type.html">Typedefs
                        </bx-header-menu-item>
                        <bx-header-menu-item href="namespacemembers_enum.html">Enumerations
                        </bx-header-menu-item>
                        <bx-header-menu-item href="namespacemembers_eval.html">Enumerator
                        </bx-header-menu-item>
                    </bx-header-menu>
                </bx-header-menu>
                <bx-header-menu menu-label="Classes" trigger-content="Classes">
                    <bx-header-menu-item href="annotated.html">Class List
                    </bx-header-menu-item>
                    <bx-header-menu-item href="classes.html">Class Index
                    </bx-header-menu-item>
                    <bx-header-menu-item href="inherits.html">Class Hierarchy
                    </bx-header-menu-item>
                    <bx-header-menu menu-label="Class Members" trigger-content="Class Members">
                        <bx-header-menu-item href="functions.html">All
                        </bx-header-menu-item>
                        <bx-header-menu-item href="functions_func.html">Functions
                        </bx-header-menu-item>
                        <bx-header-menu-item href="functions_type.html">Variables
                        </bx-header-menu-item>
                        <bx-header-menu-item href="functions_type.html">Typedefs
                        </bx-header-menu-item>
                        <bx-header-menu-item href="functions_enum.html">Enumerations
                        </bx-header-menu-item>
                    </bx-header-menu>
                </bx-header-menu>
                <bx-header-menu menu-label="Files" trigger-content="Files">
                    <bx-header-menu-item href="files.html">File List</bx-header-menu-item>
                </bx-header-menu>
            </bx-header-nav>
        </bx-header>
        <!-- do not remove this div, it is closed by doxygen! -->
        <!-- end header part --><!-- Generated by Doxygen 1.8.17 -->
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_0f55fc5ad776d9cdde0a4e569ed4d702.html">helayers</a></li><li class="navelem"><a class="el" href="dir_fe9445a8d64dec82f0d3f43ced4cdec5.html">ai</a></li><li class="navelem"><a class="el" href="dir_f3e4e5e0b70e962840917f7386d0c3a8.html">nn</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#namespaces">Namespaces</a>  </div>
  <div class="headertitle">
<div class="title">NeuralNetOnnxParser.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;NeuralNetArch.h&quot;</code><br />
<code>#include &quot;helayers/math/DoubleTensor.h&quot;</code><br />
<code>#include &quot;onnx/onnx_pb.h&quot;</code><br />
</div>
<p><a href="NeuralNetOnnxParser_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhelayers_1_1CoefficientsState.html">helayers::CoefficientsState</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A class to keep track on the state of a polynomial function p(x) of a certain data item (inputs and outputs of the graph nodes) that represents a source (x) and coefficients.  <a href="classhelayers_1_1CoefficientsState.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classhelayers_1_1NeuralNetOnnxParser.html">helayers::NeuralNetOnnxParser</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">This class is used to parse ONNX files.  <a href="classhelayers_1_1NeuralNetOnnxParser.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="namespaces"></a>
Namespaces</h2></td></tr>
<tr class="memitem:namespacehelayers"><td class="memItemLeft" align="right" valign="top"> &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="namespacehelayers.html">helayers</a></td></tr>
<tr class="memdesc:namespacehelayers"><td class="mdescLeft">&#160;</td><td class="mdescRight">A class providing utility functions to perform simulations. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h1><a class="anchor" id="autotoc_md48"></a>
Loading NN architecture from ONNX file</h1>
<p>Below are instructions for how an ONNX file should look like in order to define a model with architecture that's being supported by Helayers.</p>
<ul>
<li>The supported operators are "Conv", "AveragePool", "Gemm", "MatMul", "Pad", "Flatten", "Concat", "BatchNormalization" and "Identity", as well as operators that are interpreted as an activation layer: "Pow", "Mul", "Sub" and "Constant". The "Add" operator is also supported and may be used either as a separate layer that adds the outputs of two previous layers together, or as part of an activation layer.</li>
<li>The NN can be non-sequential: operator's output can be the input of multiple operators, and the outputs of two operators can be added or concatenated to one another as long as the shapes are compatible. The operators must form a DAG, where all paths start and end in the same nodes.</li>
<li>The NN must start with either a Conv, a Gemm or a MatMul operator.</li>
<li>If both Conv/AveragePool and Gemm/MatMul operators are present in a path along the NN, all Conv/AveragePool operators must come before any Gemm/MatMul operator, and a Flatten operator must be present after the last Conv/AveragePool operator and before the first Gemm/MatMul operator. Between the Flatten operator and the first Gemm/MatMul operator that follows, the path must remain sequential.</li>
<li>Flatten operator cannot be present in any case other than having both bothConv/AveragePool and Gemm/MatMul operators in a path along the NN.</li>
<li>Pow, Mul, Add (unless adding two layers), Sub and Constant operators will be interpreted as a polynomial activation layer. These operators may be present at any location other than being the first layers of the NN.</li>
<li>BatchNormalization operator must be applied with respect to the channels dimension and must therefore be present only in NNs with Conv operator(s), and not after any Flatten operator.</li>
</ul>
<h2><a class="anchor" id="autotoc_md49"></a>
Conv</h2>
<ul>
<li>Must have two or three inputs: the input data, filters and optional biases.</li>
<li>Must have one output.</li>
<li>The supported attributes are: (any other attribute will be ignored)<ul>
<li>"kernel_shape" - required, must contain two integers</li>
<li>"strides" - required, must contain two integers</li>
<li>"pads" - required, must contain 4 integers</li>
</ul>
</li>
<li>The number of filters will be deduced from the associated filters specified as input for the operator.</li>
<li>Filters are assumed to be of shape [filters][channels][rows][cols]</li>
</ul>
<h2><a class="anchor" id="autotoc_md50"></a>
AveragePool</h2>
<ul>
<li>Must have one input: the input data.</li>
<li>Must have one output.</li>
<li>The supported attributes are: (any other attribute will be ignored)<ul>
<li>"kernel_shape" - required, must contain two integers</li>
<li>"strides" - required, must contain two integers</li>
<li>"pads" - required, must contain 4 integers. Alternatively, pads will be taken from a previous "Pad" operator, if such operator appears before this layer.</li>
</ul>
</li>
<li>NOTICE: when an average pooling layer includes padding, its evaluation by Helayers will include the pads when averaging, regardless of any setting or behaviour of an external library.</li>
</ul>
<h2><a class="anchor" id="autotoc_md51"></a>
Gemm</h2>
<ul>
<li>Must have two or three inputs: the input data, weights and optional bias.</li>
<li>Must have one output.</li>
<li>No attributes are supported (any attribute will be ignored).</li>
<li>The output size will be deduced from the associated weights specified as input for the operator.</li>
<li>Weights are assumed to be of shape [output_size][input_size]</li>
</ul>
<h2><a class="anchor" id="autotoc_md52"></a>
MatMul</h2>
<ul>
<li>Must have two inputs: the input data and weights.</li>
<li>Must have one output.</li>
<li>No attributes are supported (any attribute will be ignored).</li>
<li>The output size will be deduced from the associated weights specified as input for the operator.</li>
<li>Weights are assumed to be of shape [output_size][input_size]</li>
</ul>
<h2><a class="anchor" id="autotoc_md53"></a>
Pow</h2>
<ul>
<li>Must have two inputs: the input data and the exponent.</li>
<li>Must have one output.</li>
<li>No attributes are supported (any attribute will be ignored).</li>
<li>The input associated with the exponent must contain a valid tensor with a single value, or be a "Constant" operator representing a single scalar. The exponent value must be a non-negative integer.</li>
</ul>
<h2><a class="anchor" id="autotoc_md54"></a>
Mul</h2>
<ul>
<li>Must have two inputs.</li>
<li>Must have one output.</li>
<li>No attributes are supported (any attribute will be ignored).</li>
</ul>
<h2><a class="anchor" id="autotoc_md55"></a>
Add</h2>
<ul>
<li>Must have two inputs.</li>
<li>Must have one output.</li>
<li>No attributes are supported (any attribute will be ignored).</li>
</ul>
<h2><a class="anchor" id="autotoc_md56"></a>
Sub</h2>
<ul>
<li>Must have two inputs.</li>
<li>Must have one output.</li>
<li>No attributes are supported (any attribute will be ignored).</li>
</ul>
<h2><a class="anchor" id="autotoc_md57"></a>
Constant</h2>
<ul>
<li>Must have no inputs.</li>
<li>Must have one output.</li>
<li>The supported attributes are: (any other attribute will be ignored)<ul>
<li>"value" - required, must contain a valid tensor with a single value.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md58"></a>
Pad</h2>
<ul>
<li>Must have one or two inputs: the input data and optional pad values.</li>
<li>Must have one output.</li>
<li>The supported attributes are: (any other attribute will be ignored)<ul>
<li>"pads" - required, must contain 8 integers: 0,0,T,L,0,0,B,R where T,L,B,R are the paddings from top, left, bottom and right, and can be zero or non-zero values. If provided, will be applied over the next layer which must be AveragePool. In case the operator has two inputs, the pad values will be taken from the second input and not from the "pads" attribute. In such case, the second input must contain a tensor of 8 integers that follow the above limitations.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md59"></a>
Flatten</h2>
<ul>
<li>Must have one input: the input data.</li>
<li>Must have one output.</li>
<li>The supported attributes are: (any other attribute will be ignored)<ul>
<li>"axis" - required, must contain 1 integer with a value of 1</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md60"></a>
Concat</h2>
<ul>
<li>Must have two inputs.</li>
<li>Must have one output.</li>
<li>The supported attributes are: (any other attribute will be ignored)<ul>
<li>"axis" - required, the axis to concatenate along, one of 1,2,3. Axis 1, 2 and 3 will be interpreted as the channels, rows and columns dimensions, respectively.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md61"></a>
BatchNormalization</h2>
<ul>
<li>Must have five inputs: the input data, the scales, the biases, the means and the variances.</li>
<li>Must have one output.</li>
<li>The supported attributes are: (any other attribute will be ignored)<ul>
<li>"epsilon" - required, the value to use for the normalization, to avoid deviding by zero.</li>
</ul>
</li>
<li>The batch normalization is assumed to be over the channels dimension.</li>
</ul>
<h2><a class="anchor" id="autotoc_md62"></a>
Identity</h2>
<ul>
<li>Must have one input.</li>
<li>Must have one output.</li>
<li>No attributes are supported (any attribute will be ignored). </li>
</ul>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
</div>
</div>
</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
        <script type="text/javascript" src="doxy-boot.js"></script>
</html>
